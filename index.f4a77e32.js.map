{"mappings":"weAAAA,EAAAC,EAAA,S,uCAUO,MAAMC,EAMXC,4BACE,MAAMC,EAAM,gGAAwDC,KAAKC,OACzE,IACE,MAAMC,QAAiBC,MAAMJ,GAE7B,aADwBG,EAASE,M,CAEjC,MAAOC,GACPC,QAAQC,IAAIF,E,EAIhBP,qBAEE,IACE,MAAMI,QAAiBC,MAFb,0FAIV,aADqBD,EAASE,M,CAE9B,MAAOC,GACPC,QAAQC,IAAIF,E,EAIhBP,yBACE,IACE,MAAMI,QAAiBC,MACrB,4FAAoDH,KAAKQ,oBAAoBR,KAAKC,QAGpF,aAD6BC,EAASE,M,CAEtC,MAAOC,GACPC,QAAQC,IAAIF,E,EAKEI,oBAChB,MAAO,4FAAoDT,KAAKQ,a,CAElEE,uBACE,MAAO,yF,CAISC,gBAChBX,KAAKC,MAAQ,C,CAGfW,gBACEZ,KAAKC,MAAQ,C,CAGfY,YACEb,KAAKC,KAAO,C,CAGVa,gBAAYC,GACdf,KAAKC,KAAOc,C,CAGVD,kBACF,OAAOd,KAAKC,I,CAGVe,YACF,OAAOhB,KAAKQ,W,CAGVQ,UAAMC,GACRjB,KAAKQ,YAAcS,C,CAzErBC,cACElB,KAAKC,KAAO,EACZD,KAAKQ,YAAc,E,EA2EvB,MAAMW,EAAY,IAAItB,EAEhBuB,EAAYC,SAASC,cAAc,eAMzCxB,eAAeyB,IACb,MAAMC,QAAeL,EAAUM,eACzBC,QAAkBP,EAAUQ,sBAC5BC,GAAS,EAAAC,EAAAC,SAAWJ,EAAUK,QAASP,GAC7CJ,EAAUY,UAAYJ,GAEJ,EAAlBK,EAAAH,SAAkBJ,EAAUzB,KAAMyB,EAAUQ,aAC5CC,EAAAL,QAAYM,KAAOjB,EAAUT,uBAG7Bf,EAAAmC,QAAgBO,a,CAflBC,OAAOC,iBAAiB,QAAQ,KAC9B5C,EAAAmC,QAAgBU,cAChBC,WAAWlB,EAAgB,IAAI,I,IAgBjCmB,EAAe7C,E,oDCpGG,MAAZ8C,EAAO,CACXC,WAAYvB,SAASC,cAAc,gBACnCuB,kBAAmBxB,SAASC,cAAc,eAC1CwB,IAAKzB,SAASC,cAAc,eAGxByB,EAAmB,IAAIL,EAChBC,EAAKG,IAAIE,YAGtBL,EAAKG,IAAIE,YAAc,IAGvBL,EAAKC,WAAWL,iBAAiB,UAEjCzC,eAAwBmD,GACtBA,EAAEC,iBAEuB7B,SAASC,cAAc,eAC/B6B,UAAUC,IAAI,mBAGbL,EAAD/B,MAAQiC,EAAEI,cAAcC,SAAStC,MAAMuC,MAExD,MAAM/B,QAAeuB,EAAiBtB,eAChC+B,QAAuBT,EAAiBU,mBAE9C,GAiCF,WACEd,EAAKE,kBAAkBb,UAAY,E,CAnCnC0B,GAC+B,KAA3BX,EAAiB/B,OAAkD,IAAlCwC,EAAezB,QAAQ4B,OAK1D,OAJAhB,EAAKG,IAAIc,MAAMC,MAAQ,UACvBlB,EAAKG,IAAIE,YACP,iFACFL,EAAKC,WAAWkB,QAIlBnB,EAAKG,IAAIE,YAAc,IAEvBrD,EAAAmC,QAAgBU,cAChBO,EAAiBlC,YAanB,SAA0BkB,EAASP,GACjCmB,EAAKE,kBAAkBkB,mBACrB,aACA,EAAAlC,EAAAC,SAAWC,EAASP,IAGtB7B,EAAAmC,QAAgBO,a,CAlBhB2B,CAAiBR,EAAezB,QAASP,GACzCmB,EAAKC,WAAWkB,QAChBnB,EAAKG,IAAIc,MAAMC,MAAQ,QACvBlB,EAAKG,IAAIE,YAAc,sBAsBAiB,EArBrBlB,EAAiB/B,MAsBZiD,EAAK,GAAGC,cAAgBD,EAAKE,MAAM,MAnBxB,EAAlBlC,EAAAH,SAAkB0B,EAAevD,KAAMuD,EAAetB,aACtDC,EAAAL,QAAYM,KAAOW,EAAiBtC,oBAiBtC,IAAyBwD,C","sources":["src/js/api-service/trendingAndGenres.js","src/js/api-service/searcheAndRender.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '19011014b9b53c4fd496d37c25f2b619';\nimport spinnerControls from '../spinner/spinner';\n// import libraryCardMarkup from '../library-card/library-card';\nimport markupCard from '../card/card-murkup-main';\n// ====== Добавил Толик Шулика =========\nimport paginationManager from '../pagination/paginationManager';\nimport PathHendler from '../pagination/RequestHendler';\n// ====== Добавил Толик Шулика =========\n\nexport class GetTrendingMovies {\n  constructor() {\n    this.page = 1;\n    this.searchQuery = '';\n  }\n\n  async searchTrendingFilms() {\n    const url = `${BASE_URL}trending/all/week?api_key=${API_KEY}&page=${this.page}`;\n    try {\n      const response = await fetch(url);\n      const trendings = await response.json();\n      return trendings;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async searchGenres() {\n    const url = `${BASE_URL}genre/movie/list?api_key=${API_KEY}`;\n    try {\n      const response = await fetch(url);\n      const genres = await response.json();\n      return genres;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async fetchMovieSearch() {\n    try {\n      const response = await fetch(\n        `${BASE_URL}search/movie?api_key=${API_KEY}&query=${this.searchQuery}&page=${this.page}`\n      );\n      const searchedMovies = await response.json();\n      return searchedMovies;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  // ====== Добавил Толик Шулика =========\n  GetMovieSearcPath() {\n    return `${BASE_URL}search/movie?api_key=${API_KEY}&query=${this.searchQuery}`;\n  }\n  GetTrendingSearcPath() {\n    return `${BASE_URL}trending/all/week?api_key=${API_KEY}`;\n  }\n  // ====== Добавил Толик Шулика =========\n\n  pageIncrement() {\n    this.page += 1;\n  }\n\n  pageDecrement() {\n    this.page -= 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  set currentPage(newPage) {\n    this.page = newPage;\n  }\n\n  get currentPage() {\n    return this.page;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n\nconst GetMovies = new GetTrendingMovies();\n\nconst container = document.querySelector('.films-list');\nwindow.addEventListener('load', () => {\n  spinnerControls.showSpinner();\n  setTimeout(markupRenderer, 500);\n});\n\nasync function markupRenderer() {\n  const genres = await GetMovies.searchGenres();\n  const trendings = await GetMovies.searchTrendingFilms();\n  const markup = markupCard(trendings.results, genres);\n  container.innerHTML = markup;\n  // ====== Добавил Толик Шулика =========\n  paginationManager(trendings.page, trendings.total_pages);\n  PathHendler.path = GetMovies.GetTrendingSearcPath();\n  // ====== Добавил Толик Шулика =========\n\n  spinnerControls.hideSpinner();\n}\n\nexport default GetTrendingMovies;\n","// import MoviesApiService from './searchMovie';\nimport GetTrendingMovies from './trendingAndGenres';\nimport markupCard from '../card/card-murkup-main';\nimport spinnerControls from '../spinner/spinner';\n// ====== Добавил Толик Шулика =========\nimport paginationManager from '../pagination/paginationManager';\nimport PathHendler from '../pagination/RequestHendler';\n// ====== Добавил Толик Шулика =========\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  articlesContainer: document.querySelector('.films-list'),\n  txt: document.querySelector('.errorText'),\n};\n\nconst moviesApiService = new GetTrendingMovies();\nconst text = refs.txt.textContent;\n\n// console.log('errorText', text);\nrefs.txt.textContent = ' ';\n// console.log('moviesApiService', moviesApiService);\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  // ====== Добавил Толик Шулика =========\n  const divPaginationRef = document.querySelector('.pagination');\n  divPaginationRef.classList.add('hide-pagination');\n  // ====== Добавил Толик Шулика =========\n\n  moviesApiService.query = e.currentTarget.elements.query.value;\n\n  const genres = await moviesApiService.searchGenres();\n  const searchedMovies = await moviesApiService.fetchMovieSearch();\n  clearArticlesContainer();\n  if (moviesApiService.query === '' || searchedMovies.results.length === 0) {\n    refs.txt.style.color = '#ff001b';\n    refs.txt.textContent =\n      'Search result not successful. Enter the correct movie name and try again!';\n    refs.searchForm.reset();\n    return;\n  }\n\n  refs.txt.textContent = ' ';\n\n  spinnerControls.showSpinner();\n  moviesApiService.resetPage();\n  appendHitsMarkup(searchedMovies.results, genres);\n  refs.searchForm.reset();\n  refs.txt.style.color = 'green';\n  refs.txt.textContent = `Search result for: ${capitalizeQuery(\n    moviesApiService.query\n  )}`;\n  // ====== Добавил Толик Шулика =========\n  paginationManager(searchedMovies.page, searchedMovies.total_pages);\n  PathHendler.path = moviesApiService.GetMovieSearcPath();\n  // ====== Добавил Толик Шулика =========\n}\n\nfunction appendHitsMarkup(results, genres) {\n  refs.articlesContainer.insertAdjacentHTML(\n    'beforeend',\n    markupCard(results, genres)\n  );\n  // message.hidenError();\n  spinnerControls.hideSpinner();\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n\nfunction capitalizeQuery(text) {\n  return text[0].toUpperCase() + text.slice(1);\n}\n\n// function messageError() {\n//   refs.txt.classList.remove('visually-hidden');\n// }\n\n// function hidenError() {\n//   refs.txt.classList.add('visually-hidden');\n// }\n// =============Часть от Олега===================================\n// async function markupRenderer() {\n//     const genres = await moviesApiService.searchGenres();\n//     const trendings = await moviesApiService.fetchMovieSearche();\n//     console.log(trendings);\n//     console.log(genres);\n//     const markup = markupCard(trendings.results, genres);\n//     refs.articlesContainer.insertAdjacentHTML('beforeend', markup);\n//   }\n\n// ================================================\n\n// function createCard(results) {\n//   return results\n//     .map(\n//       ({\n//         poster_path,\n//         original_title,\n//         id,\n//         popularity,\n//         release_date,\n//         vote_count,\n//         genre_ids,\n//       }) => {\n//         return `\n//         <li class=\"films-list__item\" data-id=\"${id}\">\n//         <div class=\"wrapper\">\n//             <img src=\"http://image.tmdb.org/t/p/w500${poster_path}\" alt=\"movie\"/>\n//         </div>\n//         <div class=\"text-wrapper\">\n//             <h2 class=\"films-list__title\">${original_title}</h2>\n//             <p class=\"films-list__text\"><span class=\"films-list__ganre\">'In progress'</span> &#10072; <span class=\"release-date\">${release_date.slice(\n//               0,\n//               4\n//             )}</span>\n//             </p>\n//         </div>\n//     </li>\n//   `;\n//       }\n//     )\n//     .join('');\n// }\n"],"names":["$hsVKb","parcelRequire","$84c1efcef7a72cea$export$be063a400d042648","async","url","this","page","response","fetch","json","error","console","log","searchQuery","GetMovieSearcPath","GetTrendingSearcPath","pageIncrement","pageDecrement","resetPage","currentPage","newPage","query","newQuery","constructor","$84c1efcef7a72cea$var$GetMovies","$84c1efcef7a72cea$var$container","document","querySelector","$84c1efcef7a72cea$var$markupRenderer","genres","searchGenres","trendings","searchTrendingFilms","markup","$5ogGC","default","results","innerHTML","$1lykM","total_pages","$gl5eO","path","hideSpinner","window","addEventListener","showSpinner","setTimeout","$84c1efcef7a72cea$export$2e2bcd8739ae039","$cd61ce3655e4d915$var$refs","searchForm","articlesContainer","txt","$cd61ce3655e4d915$var$moviesApiService","textContent","e","preventDefault","classList","add","currentTarget","elements","value","searchedMovies","fetchMovieSearch","$cd61ce3655e4d915$var$clearArticlesContainer","length","style","color","reset","insertAdjacentHTML","$cd61ce3655e4d915$var$appendHitsMarkup","text1","toUpperCase","slice"],"version":3,"file":"index.f4a77e32.js.map"}