{"mappings":"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","sources":["src/library.js","src/js/firebase/firebase.js"],"sourcesContent":["import './js/modal-oc';\n\nimport './js/library-card/library-card';\n\nimport './js/scrol-to-top/scroll-to-top';\n\nimport './js/modal-film-card/movie-details';\nimport './js/modal-film-card/add-to-localStorage';\n\nimport './js/theme-mode/theme';\n\nimport './js/firebase/firebase';\n","import { onWindowLoad } from '../library-card/library-card';\nimport Notiflix from 'notiflix';\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n} from 'firebase/auth';\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCzNfDORIKECOXx70pR7oyqYxQQXlNvw0I',\n  authDomain: 'filmoteka-ee482.firebaseapp.com',\n  projectId: 'filmoteka-ee482',\n  storageBucket: 'filmoteka-ee482.appspot.com',\n  messagingSenderId: '348964044133',\n  appId: '1:348964044133:web:8806ca37db3ead82b0358c',\n};\nconst refs = {\n  modalCloseBtn: document.querySelector('.firebase-close'),\n  backdrop: document.querySelector('[data-firebase]'),\n  form: document.querySelector('.login-form'),\n  showLoginForm: document.querySelector('#login'),\n  login: document.querySelector('[data-login]'),\n  singin: document.querySelector('[data-singin]'),\n  logout: document.querySelector('#logout'),\n  beforeSinginContainer: document.querySelector('.library-filter--logedout'),\n  afterSinginContainer: document.querySelector('.library-filter'),\n  logoutContainer: document.querySelector('.library-filter--logout'),\n  greetingText: document.querySelector('.greetingText'),\n  galleryListItems: document.querySelector('.films-list'),\n};\ninitializeApp(firebaseConfig);\nconst auth = getAuth();\nonLoadPageCkeckAccount();\n\nrefs.modalCloseBtn.addEventListener('click', onModalOpenClose);\nrefs.showLoginForm.addEventListener('click', onModalOpenClose);\nrefs.form.addEventListener('submit', onLoginUserAction);\nrefs.singin.addEventListener('click', onCraetUserAction);\nrefs.logout.addEventListener('click', onExitUserAction);\nwindow.addEventListener('keydown', onEscKeyPress);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\nfunction onModalOpenClose() {\n  refs.backdrop.classList.toggle('is-hidden');\n  refs.form.reset();\n}\n\nfunction onLoginUserAction(event) {\n  event.preventDefault();\n  const {\n    elements: { email, password },\n  } = event.currentTarget;\n\n  const sendEmail = email.value;\n  const sendPassword = password.value;\n  signInWithEmailAndPassword(auth, sendEmail, sendPassword)\n    .then(userCredential => {\n      const user = userCredential.user.email;\n      Notiflix.Notify.success(`User ${user} logged in.`);\n      refs.beforeSinginContainer.classList.toggle('visually-hidden');\n      refs.afterSinginContainer.classList.toggle('visually-hidden');\n      refs.logoutContainer.classList.toggle('visually-hidden');\n      localStorage.setItem('status', `${sendEmail}`);\n      refs.form.reset();\n      onModalOpenClose();\n      refs.greetingText.textContent = `Hello, ${sendEmail}`;\n      refs.greetingText.classList.toggle('visually-hidden');\n      onWindowLoad();\n    })\n    .catch(onError);\n}\n\nfunction onCraetUserAction() {\n  const {\n    elements: { email, password },\n  } = refs.form;\n\n  const sendEmail = email.value;\n  const sendPassword = password.value;\n  createUserWithEmailAndPassword(auth, sendEmail, sendPassword)\n    .then(userCredential => {\n      var user = userCredential.user.email;\n      Notiflix.Notify.success(\n        `User ${user} was successfully created. Now you can log in.`\n      );\n      console.log(`User ${user} was successfully created. Now you can log in.`);\n      refs.form.reset();\n      onModalOpenClose();\n    })\n    .catch(onError);\n}\n\nfunction onExitUserAction() {\n  signOut(auth);\n  Notiflix.Notify.failure('You are logged out.');\n  refs.beforeSinginContainer.classList.toggle('visually-hidden');\n  if (refs.afterSinginContainer) {\n    refs.afterSinginContainer.classList.toggle('visually-hidden');\n  }\n  refs.logoutContainer.classList.toggle('visually-hidden');\n  localStorage.removeItem('status');\n  refs.galleryListItems.innerHTML = ``;\n}\n\nfunction onError() {\n  Notiflix.Notify.failure(\n    'Error creating user. User exists or database error. Please try again.'\n  );\n  console.error(\n    'Error creating user. User exists or database error. Please try again.'\n  );\n}\n\nfunction onLoadPageCkeckAccount() {\n  if (localStorage.getItem('status')) {\n    refs.beforeSinginContainer.classList.toggle('visually-hidden');\n    if (refs.afterSinginContainer) {\n      refs.afterSinginContainer.classList.toggle('visually-hidden');\n    }\n    refs.logoutContainer.classList.toggle('visually-hidden');\n    refs.greetingText.textContent = `Hello, ${localStorage.getItem('status')}`;\n    refs.greetingText.classList.toggle('visually-hidden');\n    onWindowLoad();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  if (refs.backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (e.code === 'Escape') {\n    onModalOpenClose();\n  }\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onModalOpenClose();\n  }\n}\n"],"names":["parcelRequire","$aCGLP","$20ab7713dc1af39c$var$refs","modalCloseBtn","document","querySelector","backdrop","form","showLoginForm","login","singin","logout","beforeSinginContainer","afterSinginContainer","logoutContainer","greetingText","galleryListItems","$6Urw1","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","$20ab7713dc1af39c$var$auth","$3SEMc","getAuth","$20ab7713dc1af39c$var$onModalOpenClose","classList","toggle","reset","$20ab7713dc1af39c$var$onError","$parcel$interopDefault","$iU1Pc","Notify","failure","console","error","localStorage","getItem","textContent","concat","onWindowLoad","addEventListener","event","preventDefault","_elements","currentTarget","elements","email","password","sendEmail","value","sendPassword","signInWithEmailAndPassword","then","userCredential","user","success","setItem","catch","createUserWithEmailAndPassword","log","signOut","removeItem","innerHTML","window","e","contains","code","target"],"version":3,"file":"library.e84e6170.js.map"}