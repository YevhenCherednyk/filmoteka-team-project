{"mappings":"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","sources":["src/library.js","src/js/library-card/createMovieLibraryMarkup.js","src/js/library-card/genresList.js","src/js/library-card/library-card.js"],"sourcesContent":["import './js/modal_oc';\n\nimport './js/library-card/library-card';\n\nimport './js/scrol-to-top/scrollToTop';\n\nimport './js/modal-film-card/movie-details';\nimport './js/modal-film-card/add-to-localStorage';\n\nimport './js/theme-mode/theme';","import dateOptimizer from '../api-service/date-optimizer';\nimport titleOptimizer from '../api-service/title-optimizer';\nimport genresList from './genresList';\nimport picturePathPlace from '../api-service/placeholder';\n\nexport default function createMovieLibraryMarkup(data) {\n  if (!data && !data.length) {\n    return;\n  }\n\n  return data\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        name,\n        vote_average,\n        original_title,\n        genres,\n        overview,\n        release_date,\n        first_air_date,\n      }) => {\n        return `<li class=\"films-list__item\" data-id=\"${id}\">\n  <img class=\"films-list__img\" src=\"${picturePathPlace(\n    poster_path\n  )}\" alt=\"${titleOptimizer(title, name)}\" />\n  <h2 class=\"films-list__title\">${titleOptimizer(original_title, name)}</h2>\n    <span class=\"films-list__info films-list__ganre\">${genresList(genres)}\n  </span> <span class=\"films-list__info\">&#10072;</span> <span class=\"films-list__info release-date\">${dateOptimizer(\n    release_date,\n    first_air_date\n  )}\n<span class=\"films-list__info films-rating \"> ${vote_average.toFixed(1)}</span>\n</li>`;\n      }\n    )\n    .join('');\n}\n","export default function genresList(genres) {\n  const genreList = genres.map(({ name }) => name);\n\n  if (!genreList.length) {\n    genreList.push('Other');\n  }\n\n  if (genreList.length > 2) {\n    return [genreList[0], genreList[1], 'Other'].join(', ');\n  }\n\n  return genreList.join(', ');\n}","import createMovieLibraryMarkup from './createMovieLibraryMarkup';\nimport paginationManager from '../pagination/paginationManager';\n\nconst refs = {\n  libraryUl: document.querySelector('#library'),\n  BtnWatched: document.querySelector('#watched1'),\n  BtnQueue: document.querySelector('#queue1'),\n};\n\nconst paginationRef = document.querySelector('.pagination');\nconst moviesOnPage = 20;\nlet movies;\n\nwindow.onload = () => {\n  paginationRef.classList.add('hide-pagination');\n  refs.BtnWatched.classList.add('library-filter-btn--active');\n  refs.BtnQueue.classList.remove('library-filter-btn--active');\n  movies = JSON.parse(localStorage.getItem('watched'));\n  if (!movies) {\n    refs.libraryUl.innerHTML = '';\n    return;\n  }\n  const arrMovies = movies.slice(0, moviesOnPage);\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(arrMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(1, numberOfPages);\n};\n\nrefs.BtnWatched.addEventListener('click', () => {\n  paginationRef.classList.add('hide-pagination');\n  refs.BtnWatched.classList.add('library-filter-btn--active');\n  refs.BtnQueue.classList.remove('library-filter-btn--active');\n  movies = JSON.parse(localStorage.getItem('watched'));\n  if (!movies) {\n    refs.libraryUl.innerHTML = '';\n    return;\n  }\n  const arrMovies = movies.slice(0, moviesOnPage);\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(arrMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(1, numberOfPages);\n});\n\nrefs.BtnQueue.addEventListener('click', () => {\n  paginationRef.classList.add('hide-pagination');\n  refs.BtnWatched.classList.remove('library-filter-btn--active');\n  refs.BtnQueue.classList.add('library-filter-btn--active');\n  movies = JSON.parse(localStorage.getItem('queue'));\n  if (!movies) {\n    refs.libraryUl.innerHTML = '';\n    return;\n  }\n  const arrMovies = movies.slice(0, moviesOnPage);\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(arrMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(1, numberOfPages);\n});\n\npaginationRef.addEventListener('click', e => {\n  if (e.target.innerText === '' || e.target.type !== 'button') {\n    return;\n  }\n  const currentButton = document.querySelector('.current-btn');\n  let page = currentButton.innerText;\n  if (e.target.innerText === '+1') {\n    page = parseInt(page) + 1;\n  } else if (e.target.innerText === '-1') {\n    page = parseInt(page) - 1;\n  } else {\n    page = e.target.innerText;\n  }\n\n  const currentPageMovies = [];\n  const startIterator = page * moviesOnPage - moviesOnPage;\n  const endIterator = startIterator + moviesOnPage;\n  for (let i = startIterator; i < endIterator; i += 1) {\n    if (!movies[i]) {\n      break;\n    }\n    currentPageMovies.push(movies[i]);\n  }\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(currentPageMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(parseInt(page), numberOfPages);\n  window.scrollTo({\n    top: 270,\n    behavior: 'smooth',\n  });\n});\n"],"names":["parcelRequire","$8j4eM","$bf1a353de6a0a571$export$2e2bcd8739ae039","genres","genreList","map","param","name","length","push","join","$10fbad194131c5f7$export$2e2bcd8739ae039","data","id","poster_path","title","vote_average","original_title","release_date","overview","first_air_date","concat","$1vPUk","default","$aEGUz","toFixed","$7bbea1514d1b9fc5$var$movies","$7bbea1514d1b9fc5$var$refs","libraryUl","document","querySelector","BtnWatched","BtnQueue","$7bbea1514d1b9fc5$var$paginationRef","$7bbea1514d1b9fc5$var$moviesOnPage","window","onload","classList","add","remove","JSON","parse","localStorage","getItem","arrMovies","slice","innerHTML","numberOfPages","Math","ceil","$3HVvE","addEventListener","e","target","innerText","type","page","currentPageMovies","startIterator","parseInt","endIterator","i","scrollTo","top","behavior"],"version":3,"file":"library.ed150255.js.map"}