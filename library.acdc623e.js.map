{"mappings":"gfAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAGME,EAAO,CACXC,UAAWC,SAASC,cAAc,YAClCC,WAAYF,SAASC,cAAc,YACnCE,SAAUH,SAASC,cAAc,WAG7BG,EAAgBC,aAAaC,QAAQ,WAGrCC,EAAcF,aAAaC,QAAQ,SAiBzC,SAASE,IACP,IAAMC,EAAUC,KAAKC,MAAMP,GAG3B,GAFAQ,QAAQC,IAAIJ,GAEPA,GAAYA,EAAQK,OAIzB,OAAOL,EAAQM,KAAI,SAAAC,G,IAAEC,EAAED,EAAFC,GAAIC,EAAWF,EAAXE,YAAYC,EAAKH,EAALG,MAAMC,EAAIJ,EAAJI,KAAKC,EAAYL,EAAZK,aAAaC,EAAcN,EAAdM,eAAeC,EAAMP,EAANO,OAAiBC,GAAFR,EAARS,SAAsBT,EAAZQ,cAAcE,EAAcV,EAAdU,eAC3G,MAAO,yCAC4DC,OADnBV,EAAG,2EACqCU,OAArBT,EAAY,WAI/CS,QAJwD,EAAAC,EAAAC,SAC1FV,EACAC,GACE,0CAKqDO,QAJrB,EAAAC,EAAAC,SAC9BP,EACAF,GACE,gEAEiGO,OADhDG,EAAWP,GAAQ,2GAK1BI,QAJuD,EAAA9B,EAAAgC,SACvGL,EACAE,GACE,oDACsEC,OAAxBN,EAAaU,QAAQ,GAAG,iB,IAEnEC,KAAK,G,CAGV,SAASC,IACP,IAAMC,EAAQxB,KAAKC,MAAMJ,GAGzB,GAFAK,QAAQC,IAAIJ,SAEPyB,GAAUA,EAAMpB,OAIrB,OAAOoB,EAAMnB,KAAI,SAAAC,G,IAAEC,EAAED,EAAFC,GAAIC,EAAWF,EAAXE,YAAYC,EAAKH,EAALG,MAAMC,EAAIJ,EAAJI,KAAKC,EAAYL,EAAZK,aAAaC,EAAcN,EAAdM,eAAeC,EAAMP,EAANO,OAAiBC,GAAFR,EAARS,SAAsBT,EAAZQ,cAAcE,EAAcV,EAAdU,eACzG,MAAO,yCAC4DC,OADnBV,EAAG,2EACqCU,OAArBT,EAAY,WAI/CS,QAJwD,EAAAC,EAAAC,SAC1FV,EACAC,GACE,0CAKqDO,QAJrB,EAAAC,EAAAC,SAC9BP,EACAF,GACE,gEAEiGO,OADhDG,EAAWP,GAAQ,2GAK1BI,QAJuD,EAAA9B,EAAAgC,SACvGL,EACAE,GACE,oDACsEC,OAAxBN,EAAaU,QAAQ,GAAG,iB,IAEnEC,KAAK,G,CAGV,SAASF,EAAYP,GACnB,IAAMY,EAAaZ,EAAOR,KAAI,SAAAC,G,OAAMA,EAAJI,I,IAOhC,OAL2B,IAArBe,EAAUrB,QACZqB,EAAUC,KAAK,SAIfD,EAAUrB,OAAS,EACZ,CAACqB,EAAU,GAAIA,EAAU,GAAI,SAASH,KAAK,MAG7CG,EAAUH,KAAK,K,CAM1B,SAASK,EAAyBC,GAChCxC,EAAKC,UAAUwC,UAAYD,C,CA1F7BxC,EAAKI,WAAWsC,iBAAiB,SAAS,WACxCH,EAAyB7B,I,IAG3BV,EAAKK,SAASqC,iBAAiB,SAAS,WACtC1C,EAAKC,UAAUwC,UAAY,GAC3BF,EAAyBJ,I,IAgF3BrB,QAAQC,IAAIoB,EAAuBQ,QAOnCJ,EAAyB7B,K","sources":["src/library.js","src/js/library-card/library-card.js"],"sourcesContent":["import './js/modal_oc';\n\nimport './js/library-card/library-card';\n\nimport './js/scrol-to-top/scrollToTop';\n\nimport './js/pagination/paginationEventHandler';\nimport './js/modal-film-card/movie-details';\nimport './js/modal-film-card/add-to-localStorage';","import dateOptimizer from '../api-service/date-optimizer';\nimport titleOptimizer from '../api-service/title-optimizer';\n\nconst refs = {\n  libraryUl: document.querySelector(\"#library\"),\n  BtnWatched: document.querySelector(\"#watched\"),\n  BtnQueue: document.querySelector(\"#queue\"),\n}\n\nconst libraryMovies = localStorage.getItem('watched');\n\n\nconst queueMovies = localStorage.getItem('queue');\n\nrefs.BtnWatched.addEventListener(\"click\", () => {\n  renderMovieDetailsMarkup(createMovieLibraryMarkup(libraryMovies))\n});\n\nrefs.BtnQueue.addEventListener(\"click\", () => {\n  refs.libraryUl.innerHTML = \"\";\n  renderMovieDetailsMarkup(createMovieQueueMarkup(queueMovies))\n});\n\n\n\nfunction logClick(event) {\n  console.log(event)\n}\n\nfunction createMovieLibraryMarkup() {\n  const watched = JSON.parse(libraryMovies);\n  console.log(watched);\n  \n  if (!watched || !watched.length) {\n    return\n  } \n\n  return watched.map(({id, poster_path,title,name,vote_average,original_title,genres,overview, release_date, first_air_date}) => { \n  return `<li class=\"films-list__item\" data-id=\"${id}\">\n  <img class=\"films-list__img\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${titleOptimizer(\ntitle,\nname\n)}\" />\n  <h2 class=\"films-list__title\">${titleOptimizer(\n    original_title,\n    name\n    )}</h2>\n    <span class=\"films-list__info films-list__ganre\">${genresList(genres)}\n  </span> <span class=\"films-list__info\">&#10072;</span> <span class=\"films-list__info release-date\">${dateOptimizer(\nrelease_date,\nfirst_air_date\n)}\n<span class=\"films-list__info films-rating \"> ${vote_average.toFixed(1)}</span>\n</li>`\n  }).join(\"\");\n}\n\nfunction createMovieQueueMarkup() {\n  const queue = JSON.parse(queueMovies);\n  console.log(watched);\n  \n  if (!queue || !queue.length) {\n    return\n  } \n\n  return queue.map(({id, poster_path,title,name,vote_average,original_title,genres,overview, release_date, first_air_date}) => { \n  return `<li class=\"films-list__item\" data-id=\"${id}\">\n  <img class=\"films-list__img\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${titleOptimizer(\ntitle,\nname\n)}\" />\n  <h2 class=\"films-list__title\">${titleOptimizer(\n    original_title,\n    name\n    )}</h2>\n    <span class=\"films-list__info films-list__ganre\">${genresList(genres)}\n  </span> <span class=\"films-list__info\">&#10072;</span> <span class=\"films-list__info release-date\">${dateOptimizer(\nrelease_date,\nfirst_air_date\n)}\n<span class=\"films-list__info films-rating \"> ${vote_average.toFixed(1)}</span>\n</li>`\n  }).join(\"\");\n}\n\nfunction genresList (genres) {\n  const genreList =  genres.map(({name}) => name) \n\n    if (genreList.length === 0) {\n      genreList.push('Other');\n    }\n  \n   \n  if (genreList.length > 2) {\n      return [genreList[0], genreList[1], 'Other'].join(', ');\n    }\n  \n    return genreList.join(', '); \n  }\n\nconsole.log(createMovieQueueMarkup(queue));\n\n\nfunction renderMovieDetailsMarkup(data) {\n  refs.libraryUl.innerHTML = data;\n}\n\nrenderMovieDetailsMarkup(createMovieLibraryMarkup(libraryMovies));\n\n\n"],"names":["parcelRequire","$8j4eM","$7bbea1514d1b9fc5$var$refs","libraryUl","document","querySelector","BtnWatched","BtnQueue","$7bbea1514d1b9fc5$var$libraryMovies","localStorage","getItem","$7bbea1514d1b9fc5$var$queueMovies","$7bbea1514d1b9fc5$var$createMovieLibraryMarkup","watched","JSON","parse","console","log","length","map","param","id","poster_path","title","name","vote_average","original_title","genres","release_date","overview","first_air_date","concat","$aEGUz","default","$7bbea1514d1b9fc5$var$genresList","toFixed","join","$7bbea1514d1b9fc5$var$createMovieQueueMarkup","_$queue","genreList","push","$7bbea1514d1b9fc5$var$renderMovieDetailsMarkup","data","innerHTML","addEventListener","queue"],"version":3,"file":"library.acdc623e.js.map"}