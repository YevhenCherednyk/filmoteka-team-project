{"mappings":"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","sources":["src/library.js","src/js/library-card/create-movie-library-markup.js","src/js/library-card/genres-list.js","src/js/library-card/library-card.js","src/js/firebase/firebase.js"],"sourcesContent":["import './js/modal-oc';\n\nimport './js/library-card/library-card';\n\nimport './js/scrol-to-top/scroll-to-top';\n\nimport './js/modal-film-card/movie-details';\nimport './js/modal-film-card/add-to-localStorage';\n\nimport './js/theme-mode/theme';\n\nimport './js/firebase/firebase';\n","import dateOptimizer from '../api-service/date-optimizer';\nimport titleOptimizer from '../api-service/title-optimizer';\nimport genresList from './genres-list';\nimport picturePathPlace from '../api-service/placeholder';\n\nexport default function createMovieLibraryMarkup(data) {\n  if (!data && !data.length) {\n    return;\n  }\n\n  return data\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        name,\n        vote_average,\n        original_title,\n        genres,\n        overview,\n        release_date,\n        first_air_date,\n      }) => {\n        return `<li class=\"films-list__item\" data-id=\"${id}\">\n  <img class=\"films-list__img\" src=\"${picturePathPlace(\n    poster_path\n  )}\" alt=\"${titleOptimizer(title, name)}\" />\n  <div class=\"film-list__data\">\n  <h2 class=\"films-list__title\">${titleOptimizer(original_title, name)}</h2>\n    <span class=\"films-list__info films-list__ganre\">${genresList(genres)}\n  </span> <span class=\"films-list__info\">&#10072;</span> <span class=\"films-list__info release-date\">${dateOptimizer(\n    release_date,\n    first_air_date\n  )}\n<span class=\"films-list__info films-rating \"> ${vote_average.toFixed(\n          1\n        )}</span></div>\n</li>`;\n      }\n    )\n    .join('');\n}\n","export default function genresList(genres) {\n  const genreList = genres.map(({ name }) => name);\n\n  if (!genreList.length) {\n    genreList.push('Other');\n  }\n\n  if (genreList.length > 2) {\n    return [genreList[0], genreList[1], 'Other'].join(', ');\n  }\n\n  return genreList.join(', ');\n}","import createMovieLibraryMarkup from './create-movie-library-markup';\nimport paginationManager from '../pagination/pagination-manager';\n\nconst refs = {\n  libraryUl: document.querySelector('#library'),\n  BtnWatched: document.querySelector('#watchedFilterBtn'),\n  BtnQueue: document.querySelector('#queueFilterBtn'),\n};\n\nconst paginationRef = document.querySelector('.pagination');\nconst moviesOnPage = 20;\nlet movies;\n\nexport function onWindowLoad() {\n  paginationRef.classList.add('hide-pagination');\n  refs.BtnWatched.classList.add('library-filter-btn--active');\n  refs.BtnQueue.classList.remove('library-filter-btn--active');\n  movies = JSON.parse(localStorage.getItem('watched'));\n  if (!movies) {\n    refs.libraryUl.innerHTML = '';\n    return;\n  }\n  const arrMovies = movies.slice(0, moviesOnPage);\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(arrMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(1, numberOfPages);\n}\n\nrefs.BtnWatched.addEventListener('click', () => {\n  paginationRef.classList.add('hide-pagination');\n  refs.BtnWatched.classList.add('library-filter-btn--active');\n  refs.BtnQueue.classList.remove('library-filter-btn--active');\n  movies = JSON.parse(localStorage.getItem('watched'));\n  if (!movies) {\n    refs.libraryUl.innerHTML = '';\n    return;\n  }\n  const arrMovies = movies.slice(0, moviesOnPage);\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(arrMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(1, numberOfPages);\n});\n\nrefs.BtnQueue.addEventListener('click', () => {\n  paginationRef.classList.add('hide-pagination');\n  refs.BtnWatched.classList.remove('library-filter-btn--active');\n  refs.BtnQueue.classList.add('library-filter-btn--active');\n  movies = JSON.parse(localStorage.getItem('queue'));\n  if (!movies) {\n    refs.libraryUl.innerHTML = '';\n    return;\n  }\n  const arrMovies = movies.slice(0, moviesOnPage);\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(arrMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(1, numberOfPages);\n});\n\npaginationRef.addEventListener('click', e => {\n  if (e.target.innerText === '' || e.target.type !== 'button') {\n    return;\n  }\n  const currentButton = document.querySelector('.current-btn');\n  let page = currentButton.innerText;\n  if (e.target.innerText === '+1') {\n    page = parseInt(page) + 1;\n  } else if (e.target.innerText === '-1') {\n    page = parseInt(page) - 1;\n  } else {\n    page = e.target.innerText;\n  }\n\n  const currentPageMovies = [];\n  const startIterator = page * moviesOnPage - moviesOnPage;\n  const endIterator = startIterator + moviesOnPage;\n  for (let i = startIterator; i < endIterator; i += 1) {\n    if (!movies[i]) {\n      break;\n    }\n    currentPageMovies.push(movies[i]);\n  }\n  refs.libraryUl.innerHTML = createMovieLibraryMarkup(currentPageMovies);\n  const numberOfPages = Math.ceil(movies.length / moviesOnPage);\n  paginationManager(parseInt(page), numberOfPages);\n  window.scrollTo({\n    top: 270,\n    behavior: 'smooth',\n  });\n});\n","import { onWindowLoad } from '../library-card/library-card';\nimport Notiflix from 'notiflix';\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n} from 'firebase/auth';\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCzNfDORIKECOXx70pR7oyqYxQQXlNvw0I',\n  authDomain: 'filmoteka-ee482.firebaseapp.com',\n  projectId: 'filmoteka-ee482',\n  storageBucket: 'filmoteka-ee482.appspot.com',\n  messagingSenderId: '348964044133',\n  appId: '1:348964044133:web:8806ca37db3ead82b0358c',\n};\nconst refs = {\n  modalCloseBtn: document.querySelector('.firebase-close'),\n  backdrop: document.querySelector('[data-firebase]'),\n  form: document.querySelector('.login-form'),\n  showLoginForm: document.querySelector('#login'),\n  login: document.querySelector('[data-login]'),\n  singin: document.querySelector('[data-singin]'),\n  logout: document.querySelector('#logout'),\n  beforeSinginContainer: document.querySelector('.library-filter--logedout'),\n  afterSinginContainer: document.querySelector('.library-filter'),\n  logoutContainer: document.querySelector('.library-filter--logout'),\n  greetingText: document.querySelector('.greetingText'),\n  galleryListItems: document.querySelector('.films-list'),\n};\ninitializeApp(firebaseConfig);\nconst auth = getAuth();\nonLoadPageCkeckAccount();\n\nrefs.modalCloseBtn.addEventListener('click', onModalOpenClose);\nrefs.showLoginForm.addEventListener('click', onModalOpenClose);\nrefs.form.addEventListener('submit', onLoginUserAction);\nrefs.singin.addEventListener('click', onCraetUserAction);\nrefs.logout.addEventListener('click', onExitUserAction);\nwindow.addEventListener('keydown', onEscKeyPress);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\nfunction onModalOpenClose() {\n  refs.backdrop.classList.toggle('is-hidden');\n  refs.form.reset();\n}\n\nfunction onLoginUserAction(event) {\n  event.preventDefault();\n  const {\n    elements: { email, password },\n  } = event.currentTarget;\n\n  const sendEmail = email.value;\n  const sendPassword = password.value;\n  signInWithEmailAndPassword(auth, sendEmail, sendPassword)\n    .then(userCredential => {\n      const user = userCredential.user.email;\n      Notiflix.Notify.success(`User ${user} logged in.`);\n      refs.beforeSinginContainer.classList.toggle('visually-hidden');\n      refs.afterSinginContainer.classList.toggle('visually-hidden');\n      refs.logoutContainer.classList.toggle('visually-hidden');\n      localStorage.setItem('status', `${sendEmail}`);\n      refs.form.reset();\n      onModalOpenClose();\n      refs.greetingText.textContent = `Hello, ${sendEmail}`;\n      refs.greetingText.classList.toggle('visually-hidden');\n      onWindowLoad();\n    })\n    .catch(onError);\n}\n\nfunction onCraetUserAction() {\n  const {\n    elements: { email, password },\n  } = refs.form;\n\n  const sendEmail = email.value;\n  const sendPassword = password.value;\n  createUserWithEmailAndPassword(auth, sendEmail, sendPassword)\n    .then(userCredential => {\n      var user = userCredential.user.email;\n      Notiflix.Notify.success(\n        `User ${user} was successfully created. Now you can log in.`\n      );\n      console.log(`User ${user} was successfully created. Now you can log in.`);\n      refs.form.reset();\n      onModalOpenClose();\n    })\n    .catch(onError);\n}\n\nfunction onExitUserAction() {\n  signOut(auth);\n  Notiflix.Notify.failure('You are logged out.');\n  refs.beforeSinginContainer.classList.toggle('visually-hidden');\n  if (refs.afterSinginContainer) {\n    refs.afterSinginContainer.classList.toggle('visually-hidden');\n  }\n  refs.logoutContainer.classList.toggle('visually-hidden');\n  localStorage.removeItem('status');\n  refs.galleryListItems.innerHTML = ``;\n}\n\nfunction onError() {\n  Notiflix.Notify.failure(\n    'Error creating user. User exists or database error. Please try again.'\n  );\n  console.error(\n    'Error creating user. User exists or database error. Please try again.'\n  );\n}\n\nfunction onLoadPageCkeckAccount() {\n  if (localStorage.getItem('status')) {\n    refs.beforeSinginContainer.classList.toggle('visually-hidden');\n    if (refs.afterSinginContainer) {\n      refs.afterSinginContainer.classList.toggle('visually-hidden');\n    }\n    refs.logoutContainer.classList.toggle('visually-hidden');\n    refs.greetingText.textContent = `Hello, ${localStorage.getItem('status')}`;\n    refs.greetingText.classList.toggle('visually-hidden');\n    onWindowLoad();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  if (refs.backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (e.code === 'Escape') {\n    onModalOpenClose();\n  }\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onModalOpenClose();\n  }\n}\n"],"names":["parcelRequire","$8j4eM","$0a2cbe18a4d36235$export$2e2bcd8739ae039","genres","genreList","map","param","name","length","push","join","$e35de5a8917c1a5e$export$2e2bcd8739ae039","data","id","poster_path","title","vote_average","original_title","release_date","overview","first_air_date","concat","$1vPUk","default","$aEGUz","toFixed","$7bbea1514d1b9fc5$var$movies","$7bbea1514d1b9fc5$var$refs","libraryUl","document","querySelector","BtnWatched","BtnQueue","$7bbea1514d1b9fc5$var$paginationRef","$7bbea1514d1b9fc5$var$moviesOnPage","$7bbea1514d1b9fc5$export$ed85e297a450c0d2","classList","add","remove","JSON","parse","localStorage","getItem","arrMovies","slice","innerHTML","numberOfPages","Math","ceil","$3RyMV","addEventListener","e","target","innerText","type","page","currentPageMovies","startIterator","parseInt","endIterator","i","window","scrollTo","top","behavior","$20ab7713dc1af39c$var$refs","modalCloseBtn","backdrop","form","showLoginForm","login","singin","logout","beforeSinginContainer","afterSinginContainer","logoutContainer","greetingText","galleryListItems","$6Urw1","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","$20ab7713dc1af39c$var$auth","$3SEMc","getAuth","$20ab7713dc1af39c$var$onModalOpenClose","toggle","reset","$20ab7713dc1af39c$var$onError","$parcel$interopDefault","$iU1Pc","Notify","failure","console","error","textContent","event","preventDefault","_elements","currentTarget","elements","email","password","sendEmail","value","sendPassword","signInWithEmailAndPassword","then","userCredential","user","success","setItem","catch","createUserWithEmailAndPassword","log","signOut","removeItem","contains","code"],"version":3,"file":"library.44d2c681.js.map"}