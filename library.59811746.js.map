{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAGA,MAAME,EAAO,CACXC,UAAWC,SAASC,cAAc,YAClCC,WAAYF,SAASC,cAAc,YACnCE,SAAUH,SAASC,cAAc,WAG7BG,EAAgBC,aAAaC,QAAQ,WAGrCC,EAAcF,aAAaC,QAAQ,SAiBzC,SAASE,IACP,MAAMC,EAAUC,KAAKC,MAAMP,GAG3B,GAFAQ,QAAQC,IAAIJ,GAEPA,GAAYA,EAAQK,OAIzB,OAAOL,EAAQM,KAAI,EAACC,GAACA,EAAEC,YAAEA,EAAWC,MAACA,EAAKC,KAACA,EAAIC,aAACA,EAAYC,eAACA,EAAcC,OAACA,EAAMC,SAACA,EAAQC,aAAEA,EAAYC,eAAEA,KACpG,yCAAyCT,2EACmBC,YAAqB,EAAAS,EAAAC,SAC1FT,EACAC,4CAEkC,EAAAO,EAAAC,SAC9BN,EACAF,iEAEmDS,EAAWN,6GACqC,EAAAzB,EAAA8B,SACvGH,EACAC,qDAEgDL,EAAaS,QAAQ,qBAEhEC,KAAK,G,CAGV,SAASC,IACP,MAAMC,EAAQtB,KAAKC,MAAMJ,GAGzB,GAFAK,QAAQC,IAAIJ,SAEPuB,GAAUA,EAAMlB,OAIrB,OAAOkB,EAAMjB,KAAI,EAACC,GAACA,EAAEC,YAAEA,EAAWC,MAACA,EAAKC,KAACA,EAAIC,aAACA,EAAYC,eAACA,EAAcC,OAACA,EAAMC,SAACA,EAAQC,aAAEA,EAAYC,eAAEA,KAClG,yCAAyCT,2EACmBC,YAAqB,EAAAS,EAAAC,SAC1FT,EACAC,4CAEkC,EAAAO,EAAAC,SAC9BN,EACAF,iEAEmDS,EAAWN,6GACqC,EAAAzB,EAAA8B,SACvGH,EACAC,qDAEgDL,EAAaS,QAAQ,qBAEhEC,KAAK,G,CAGV,SAASF,EAAYN,GACnB,MAAMW,EAAaX,EAAOP,KAAI,EAACI,KAACA,KAAUA,IAO1C,OAL2B,IAArBc,EAAUnB,QACZmB,EAAUC,KAAK,SAIfD,EAAUnB,OAAS,EACZ,CAACmB,EAAU,GAAIA,EAAU,GAAI,SAASH,KAAK,MAG7CG,EAAUH,KAAK,K,CAM1B,SAASK,EAAyBC,GAChCtC,EAAKC,UAAUsC,UAAYD,C,CA1F7BtC,EAAKI,WAAWoC,iBAAiB,SAAS,KACxCH,EAAyB3B,IAAwC,IAGnEV,EAAKK,SAASmC,iBAAiB,SAAS,KACtCxC,EAAKC,UAAUsC,UAAY,GAC3BF,EAAyBJ,IAAoC,IAgF/DnB,QAAQC,IAAIkB,EAAuBC,QAOnCG,EAAyB3B,K","sources":["src/library.js","src/js/library-card/library-card.js"],"sourcesContent":["import './js/modal_oc';\n\nimport './js/library-card/library-card';\n\nimport './js/scrol-to-top/scrollToTop';\n\nimport './js/pagination/paginationEventHandler';\nimport './js/modal-film-card/movie-details';\nimport './js/modal-film-card/add-to-localStorage';","import dateOptimizer from '../api-service/date-optimizer';\nimport titleOptimizer from '../api-service/title-optimizer';\n\nconst refs = {\n  libraryUl: document.querySelector(\"#library\"),\n  BtnWatched: document.querySelector(\"#watched\"),\n  BtnQueue: document.querySelector(\"#queue\"),\n}\n\nconst libraryMovies = localStorage.getItem('watched');\n\n\nconst queueMovies = localStorage.getItem('queue');\n\nrefs.BtnWatched.addEventListener(\"click\", () => {\n  renderMovieDetailsMarkup(createMovieLibraryMarkup(libraryMovies))\n});\n\nrefs.BtnQueue.addEventListener(\"click\", () => {\n  refs.libraryUl.innerHTML = \"\";\n  renderMovieDetailsMarkup(createMovieQueueMarkup(queueMovies))\n});\n\n\n\nfunction logClick(event) {\n  console.log(event)\n}\n\nfunction createMovieLibraryMarkup() {\n  const watched = JSON.parse(libraryMovies);\n  console.log(watched);\n  \n  if (!watched || !watched.length) {\n    return\n  } \n\n  return watched.map(({id, poster_path,title,name,vote_average,original_title,genres,overview, release_date, first_air_date}) => { \n  return `<li class=\"films-list__item\" data-id=\"${id}\">\n  <img class=\"films-list__img\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${titleOptimizer(\ntitle,\nname\n)}\" />\n  <h2 class=\"films-list__title\">${titleOptimizer(\n    original_title,\n    name\n    )}</h2>\n    <span class=\"films-list__info films-list__ganre\">${genresList(genres)}\n  </span> <span class=\"films-list__info\">&#10072;</span> <span class=\"films-list__info release-date\">${dateOptimizer(\nrelease_date,\nfirst_air_date\n)}\n<span class=\"films-list__info films-rating \"> ${vote_average.toFixed(1)}</span>\n</li>`\n  }).join(\"\");\n}\n\nfunction createMovieQueueMarkup() {\n  const queue = JSON.parse(queueMovies);\n  console.log(watched);\n  \n  if (!queue || !queue.length) {\n    return\n  } \n\n  return queue.map(({id, poster_path,title,name,vote_average,original_title,genres,overview, release_date, first_air_date}) => { \n  return `<li class=\"films-list__item\" data-id=\"${id}\">\n  <img class=\"films-list__img\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${titleOptimizer(\ntitle,\nname\n)}\" />\n  <h2 class=\"films-list__title\">${titleOptimizer(\n    original_title,\n    name\n    )}</h2>\n    <span class=\"films-list__info films-list__ganre\">${genresList(genres)}\n  </span> <span class=\"films-list__info\">&#10072;</span> <span class=\"films-list__info release-date\">${dateOptimizer(\nrelease_date,\nfirst_air_date\n)}\n<span class=\"films-list__info films-rating \"> ${vote_average.toFixed(1)}</span>\n</li>`\n  }).join(\"\");\n}\n\nfunction genresList (genres) {\n  const genreList =  genres.map(({name}) => name) \n\n    if (genreList.length === 0) {\n      genreList.push('Other');\n    }\n  \n   \n  if (genreList.length > 2) {\n      return [genreList[0], genreList[1], 'Other'].join(', ');\n    }\n  \n    return genreList.join(', '); \n  }\n\nconsole.log(createMovieQueueMarkup(queue));\n\n\nfunction renderMovieDetailsMarkup(data) {\n  refs.libraryUl.innerHTML = data;\n}\n\nrenderMovieDetailsMarkup(createMovieLibraryMarkup(libraryMovies));\n\n\n"],"names":["parcelRequire","$7JhjK","$13cf809e75ce6b71$var$refs","libraryUl","document","querySelector","BtnWatched","BtnQueue","$13cf809e75ce6b71$var$libraryMovies","localStorage","getItem","$13cf809e75ce6b71$var$queueMovies","$13cf809e75ce6b71$var$createMovieLibraryMarkup","watched","JSON","parse","console","log","length","map","id","poster_path","title","name","vote_average","original_title","genres","overview","release_date","first_air_date","$8mK9U","default","$13cf809e75ce6b71$var$genresList","toFixed","join","$13cf809e75ce6b71$var$createMovieQueueMarkup","queue","genreList","push","$13cf809e75ce6b71$var$renderMovieDetailsMarkup","data","innerHTML","addEventListener"],"version":3,"file":"library.59811746.js.map"}