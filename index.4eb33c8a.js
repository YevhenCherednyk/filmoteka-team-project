function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a);var s=a("hsVKb"),i=a("7JhjK"),o=a("8mK9U");function l(e,t){const r=[];if(!t)return"Other";for(let n of t){let t=e.genres.find((e=>e.id===n));null!=t&&r.push(t.name)}return 0===r.length&&r.push("Other"),r.length>3?[r[0],r[1],"Other"].join(", "):r.join(", ")}var c=a("CjjGD");function u(e,t){return e.map((({id:e,title:r,name:n,genre_ids:a,release_date:s,first_air_date:u,poster_path:d})=>`<li class="films-list__item" data-id="${e}">\n                    <img class="films-list__img" src="${(0,c.default)(d)}" alt="${(0,o.default)(r,n)}" />\n                    <div class="film-list__data">\n                    <h2 class="films-list__title">${(0,o.default)(r,n)}</h2>\n                    <span class="films-list__info films-list__ganre">${l(t,a)}</span> <span class="films-list__info">&#10072;</span> <span class="films-list__info release-date">${(0,i.default)(s,u)}</span></div>\n        </li>`)).join("")}var d=a("dekjU");const g=new class{get path(){return this.requst}set path(e){this.requst=e}constructor(){this.requst=""}};g.path="https://api.themoviedb.org/3/trending/movie/week?api_key=19011014b9b53c4fd496d37c25f2b619";var f=g;class h{async searchTrendingFilms(){const e=`https://api.themoviedb.org/3/trending/all/week?api_key=19011014b9b53c4fd496d37c25f2b619&page=${this.page}`;try{const t=await fetch(e);return await t.json()}catch(e){console.log(e)}}async searchGenres(){try{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=19011014b9b53c4fd496d37c25f2b619");return await e.json()}catch(e){console.log(e)}}async fetchMovieSearch(){try{const e=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=19011014b9b53c4fd496d37c25f2b619&query=${this.searchQuery}&page=${this.page}`);return await e.json()}catch(e){console.log(e)}}GetMovieSearcPath(){return`https://api.themoviedb.org/3/search/movie?api_key=19011014b9b53c4fd496d37c25f2b619&query=${this.searchQuery}`}GetTrendingSearcPath(){return"https://api.themoviedb.org/3/trending/all/week?api_key=19011014b9b53c4fd496d37c25f2b619"}pageIncrement(){this.page+=1}pageDecrement(){this.page-=1}resetPage(){this.page=1}set currentPage(e){this.page=e}get currentPage(){return this.page}get query(){return this.searchQuery}set query(e){this.searchQuery=e}constructor(){this.page=1,this.searchQuery=""}}const p=new h,m=document.querySelector(".films-list");async function y(){const e=await p.searchGenres(),t=await p.searchTrendingFilms(),r=u(t.results,e);m.innerHTML=r,(0,d.default)(t.page,t.total_pages),f.path=p.GetTrendingSearcPath(),s.default.hideSpinner()}window.addEventListener("load",(()=>{s.default.showSpinner(),setTimeout(y,500)}));var v=h;s=a("hsVKb"),d=a("dekjU");const b={searchForm:document.querySelector(".search-form"),articlesContainer:document.querySelector(".films-list"),txt:document.querySelector(".errorText")},w=new v;b.txt.textContent;b.txt.textContent=" ",b.searchForm.addEventListener("submit",(async function(e){e.preventDefault();document.querySelector(".pagination").classList.add("hide-pagination"),w.query=e.currentTarget.elements.query.value;const t=await w.searchGenres(),r=await w.fetchMovieSearch();if(function(){b.articlesContainer.innerHTML=""}(),""===w.query||0===r.results.length)return b.txt.style.color="#ff001b",b.txt.textContent="Search result not successful. Enter the correct movie name and try again!",void b.searchForm.reset();b.txt.textContent=" ",s.default.showSpinner(),w.resetPage(),function(e,t){b.articlesContainer.insertAdjacentHTML("beforeend",u(e,t)),s.default.hideSpinner()}(r.results,t),b.searchForm.reset(),b.txt.style.color="green",b.txt.textContent=`Search result for: ${n=w.query,n[0].toUpperCase()+n.slice(1)}`,(0,d.default)(r.page,r.total_pages),f.path=w.GetMovieSearcPath();var n})),a("37wlI");d=a("dekjU");var S=a("eWCmQ"),x=a("2shzp");var _=async function(t){try{return(await x.default.get(t)).data}catch(t){return void e(S).Notify.error(t)}};const q=document.querySelector(".films-list");var C=async function(e,t){const r=await _(`${e}&page=${t}`),n=await _("https://api.themoviedb.org/3/genre/movie/list?api_key=19011014b9b53c4fd496d37c25f2b619"),a=await u(r.results,n);q.innerHTML=a,(0,d.default)(r.page,r.total_pages),window.scrollTo({top:270,behavior:"smooth"})};document.querySelector(".pagination").addEventListener("click",(e=>{if(""===e.target.innerText||"button"!==e.target.type)return;let t=document.querySelector(".current-btn").innerText;t="+1"===e.target.innerText?parseInt(t)+1:"-1"===e.target.innerText?parseInt(t)-1:e.target.innerText,C(f.path,t)})),a("c30xx"),a("h7M65"),a("epvLZ"),a("2sCHQ");S=a("eWCmQ");var k=a("25RCP"),L=a("amyG6");const T={modalCloseBtn:document.querySelector(".firebase-close"),backdrop:document.querySelector("[data-firebase]"),form:document.querySelector(".login-form"),showLoginForm:document.querySelector("#login"),login:document.querySelector("[data-login]"),singin:document.querySelector("[data-singin]"),logout:document.querySelector("#logout"),beforeSinginContainer:document.querySelector(".library-filter--logedout"),logoutContainer:document.querySelector(".library-filter--logout"),greetingText:document.querySelector(".greetingText")};(0,k.initializeApp)({apiKey:"AIzaSyCzNfDORIKECOXx70pR7oyqYxQQXlNvw0I",authDomain:"filmoteka-ee482.firebaseapp.com",projectId:"filmoteka-ee482",storageBucket:"filmoteka-ee482.appspot.com",messagingSenderId:"348964044133",appId:"1:348964044133:web:8806ca37db3ead82b0358c"});const E=(0,L.getAuth)();function $(){T.backdrop.classList.toggle("is-hidden"),T.form.reset()}function I(){e(S).Notify.failure("Error creating user. User exists or database error. Please try again."),console.error("Error creating user. User exists or database error. Please try again.")}localStorage.getItem("status")&&(T.beforeSinginContainer.classList.toggle("visually-hidden"),T.logoutContainer.classList.toggle("visually-hidden"),T.greetingText.textContent=`Hello, ${localStorage.getItem("status")}`,T.greetingText.classList.toggle("visually-hidden")),T.modalCloseBtn.addEventListener("click",$),T.showLoginForm.addEventListener("click",$),T.form.addEventListener("submit",(function(t){t.preventDefault();const{elements:{email:r,password:n}}=t.currentTarget,a=r.value,s=n.value;(0,L.signInWithEmailAndPassword)(E,a,s).then((t=>{const r=t.user.email;e(S).Notify.success(`User ${r} logged in.`),T.beforeSinginContainer.classList.toggle("visually-hidden"),T.logoutContainer.classList.toggle("visually-hidden"),localStorage.setItem("status",`${a}`),T.form.reset(),$(),T.greetingText.textContent=`Hello, ${a}`,T.greetingText.style.color="green"})).catch(I)})),T.singin.addEventListener("click",(function(){const{elements:{email:t,password:r}}=T.form,n=t.value,a=r.value;(0,L.createUserWithEmailAndPassword)(E,n,a).then((t=>{var r=t.user.email;e(S).Notify.success(`User ${r} was successfully created. Now you can login.`),console.log(`User ${r} was successfully created. Now you can login.`),T.form.reset(),$()})).catch(I)})),T.logout.addEventListener("click",(function(){(0,L.signOut)(E),e(S).Notify.failure("You are logged out."),T.beforeSinginContainer.classList.toggle("visually-hidden"),T.logoutContainer.classList.toggle("visually-hidden"),localStorage.removeItem("status")})),window.addEventListener("keydown",(function(e){if(T.backdrop.classList.contains("is-hidden"))return;"Escape"===e.code&&$()})),T.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&$()}));
//# sourceMappingURL=index.4eb33c8a.js.map
